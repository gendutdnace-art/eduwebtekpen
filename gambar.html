<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual | Konten Gambar Interaktif</title>
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Menggunakan font Inter secara default */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Style untuk navigasi aktif */
        .active-nav {
            background-color: #f3e8ff; /* purple-100 */
            color: #9333ea; /* purple-600 */
            border-left: 4px solid #9333ea;
        }
        /* Style untuk kartu interaktif */
        .image-card {
            position: relative;
            cursor: pointer;
            overflow: hidden;
            border: 2px solid transparent;
            transition: all 0.3s ease-in-out;
        }
        .image-card:hover {
            border-color: #a78bfa; /* purple-400 */
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .play-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 1;
            transition: opacity 0.3s ease-in-out;
        }
        .image-card.playing .play-icon {
            opacity: 0;
        }
        .image-card.playing .pause-icon {
            opacity: 1;
        }
        .pause-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">

    <!-- Header & Navbar (Konsisten) -->
    <header class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="index.html" class="text-2xl font-bold text-indigo-700">
                    EDUWEB Tekpen
                </a>
                <nav class="hidden md:flex space-x-4">
                    <a href="index.html" class="text-gray-700 hover:text-indigo-600 font-medium px-3 py-2 rounded-lg transition duration-150 ease-in-out">Beranda</a>
                    <!-- <a href="geografi.html" class="text-gray-700 hover:text-indigo-600 font-medium px-3 py-2 rounded-lg transition duration-150 ease-in-out">Geografi</a> -->
                    <!-- <a href="sejarah.html" class="text-gray-700 hover:text-indigo-600 font-medium px-3 py-2 rounded-lg transition duration-150 ease-in-out">Sejarah</a> -->
                    <a href="fiqh.html" class="text-gray-700 hover:text-indigo-600 font-medium px-3 py-2 rounded-lg transition duration-150 ease-in-out">Fiqh</a>
                    <a href="kuis.html" class="text-gray-700 hover:text-indigo-600 font-medium px-3 py-2 rounded-lg transition duration-150 ease-in-out">Kuis</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Konten Utama Halaman Gambar -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <h1 class="text-3xl font-extrabold text-gray-900 mb-6 border-b pb-2">Visual: Galeri Audio dengan ilustrasi Gambar</h1>

        <div class="flex flex-col md:flex-row gap-8">
            
            <!-- Sidebar Navigasi Konten -->
            <aside class="md:w-1/4 bg-white p-4 rounded-xl shadow-lg h-fit sticky top-20">
                <h2 class="text-lg font-bold text-purple-700 mb-4">Materi Gambar</h2>
                <nav class="space-y-1">
                    <!-- Navigasi Konten Gambar -->

                    <a href="#fiqh-gambar" class="nav-link block px-3 py-2 rounded-lg hover:bg-purple-50 transition duration-150 ease-in-out text-gray-700">
                        Fiqh
                    </a>
                </nav>
            </aside>

            <!-- Area Konten Utama -->
            <section class=":w-3/4 space-y-12 z-30">
                
                <!-- 1. Galeri Sejarah -->
                
                <!-- 3. Galeri Fiqh -->
                <article id="fiqh-gambar" class="space-y-6">
                    <h2 class="text-2xl font-bold text-gray-800 border-b pb-2">Fiqh</h2>
                    <p class="text-gray-600">Ilustrasi langkah-langkah bersuci dan ibadah lainnya. Klik untuk mendengar penjelasan.</p>
                    <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                         <div id="fiqh-1" class="image-card rounded-xl shadow-md bg-white">
                            <img src="GAMBAR/FIQH/IMG f 1.png" alt="3" class="w-full h-auto object-cover rounded-t-xl">
                            <p class="p-2 text-sm font-medium text-center text-purple-700">Tata Cara Tayamum</p>
                            <!-- Ikon Play -->
                            <svg class="play-icon w-12 h-12 text-white bg-black bg-opacity-60 rounded-full p-2" viewBox="0 0 24 24" fill="currentColor" onclick="event.stopPropagation(); toggleAudio('fiqh-1');">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            <!-- Ikon Pause -->
                            <svg class="pause-icon w-12 h-12 text-white bg-black bg-opacity-60 rounded-full p-2" viewBox="0 0 24 24" fill="currentColor" onclick="event.stopPropagation(); toggleAudio('fiqh-1');">
                                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                            </svg>
                            <!-- Audio element tersembunyi -->
                            <audio id="audio-fiqh-1" src="GAMBAR/FIQH/IMG f 1 vc.wav" preload="none"></audio>
                        </div>
                        <div id="fiqh-2" class="image-card rounded-xl shadow-md bg-white">
                            <img src="GAMBAR/FIQH/IMG f 2.png" alt="3" class="w-full h-auto object-cover rounded-t-xl">
                            <p class="p-2 text-sm font-medium text-center text-purple-700">Setelah tayamum air tersedia?</p>
                            <!-- Ikon Play -->
                            <svg class="play-icon w-12 h-12 text-white bg-black bg-opacity-60 rounded-full p-2" viewBox="0 0 24 24" fill="currentColor" onclick="event.stopPropagation(); toggleAudio('fiqh-2');">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            <!-- Ikon Pause -->
                            <svg class="pause-icon w-12 h-12 text-white bg-black bg-opacity-60 rounded-full p-2" viewBox="0 0 24 24" fill="currentColor" onclick="event.stopPropagation(); toggleAudio('fiqh-2');">
                                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                            </svg>
                            <!-- Audio element tersembunyi -->
                            <audio id="audio-fiqh-2" src="GAMBAR/FIQH/IMG f 2 vc.wav" preload="none"></audio>
                        </div>
                        <div id="fiqh-3" class="image-card rounded-xl shadow-md bg-white">
                            <img src="GAMBAR/FIQH/IMG f 3.png" alt="3" class="w-full h-auto object-cover rounded-t-xl">
                            <p class="p-2 text-sm font-medium text-center text-purple-700">Batas Pemakaian Tayamum</p>
                            <!-- Ikon Play -->
                            <svg class="play-icon w-12 h-12 text-white bg-black bg-opacity-60 rounded-full p-2" viewBox="0 0 24 24" fill="currentColor" onclick="event.stopPropagation(); toggleAudio('fiqh-3');">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            <!-- Ikon Pause -->
                            <svg class="pause-icon w-12 h-12 text-white bg-black bg-opacity-60 rounded-full p-2" viewBox="0 0 24 24" fill="currentColor" onclick="event.stopPropagation(); toggleAudio('fiqh-3');">
                                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                            </svg>
                            <!-- Audio element tersembunyi -->
                            <audio id="audio-fiqh-3" src="GAMBAR/FIQH/IMG f 3 vc.wav" preload="none"></audio>
                        </div>
                        <div id="fiqh-4" class="image-card rounded-xl shadow-md bg-white">
                            <img src="GAMBAR/FIQH/IMG f 4.png" alt="3" class="w-full h-auto object-cover rounded-t-xl">
                            <p class="p-2 text-sm font-medium text-center text-purple-700">Tata cara wudhu</p>
                            <!-- Ikon Play -->
                            <svg class="play-icon w-12 h-12 text-white bg-black bg-opacity-60 rounded-full p-2" viewBox="0 0 24 24" fill="currentColor" onclick="event.stopPropagation(); toggleAudio('fiqh-4');">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            <!-- Ikon Pause -->
                            <svg class="pause-icon w-12 h-12 text-white bg-black bg-opacity-60 rounded-full p-2" viewBox="0 0 24 24" fill="currentColor" onclick="event.stopPropagation(); toggleAudio('fiqh-4');">
                                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                            </svg>
                            <!-- Audio element tersembunyi -->
                            <audio id="audio-fiqh-4" src="GAMBAR/FIQH/IMG f 4 vc.wav" preload="none"></audio>
                        </div>
                        <div id="fiqh-5" class="image-card rounded-xl shadow-md bg-white">
                            <img src="GAMBAR/FIQH/IMG f 5.png" alt="3" class="w-full h-auto object-cover rounded-t-xl">
                            <p class="p-2 text-sm font-medium text-center text-purple-700">Najis Mugholadoh</p>
                            <!-- Ikon Play -->
                            <svg class="play-icon w-12 h-12 text-white bg-black bg-opacity-60 rounded-full p-2" viewBox="0 0 24 24" fill="currentColor" onclick="event.stopPropagation(); toggleAudio('fiqh-5');">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            <!-- Ikon Pause -->
                            <svg class="pause-icon w-12 h-12 text-white bg-black bg-opacity-60 rounded-full p-2" viewBox="0 0 24 24" fill="currentColor" onclick="event.stopPropagation(); toggleAudio('fiqh-5');">
                                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                            </svg>
                            <!-- Audio element tersembunyi -->
                            <audio id="audio-fiqh-5" src="GAMBAR/FIQH/IMG f 5 vc.wav" preload="none"></audio>
                        </div>
                        <div id="fiqh-6" class="image-card rounded-xl shadow-md bg-white">
                            <img src="GAMBAR/FIQH/IMG f 6.png" alt="3" class="w-full h-auto object-cover rounded-t-xl">
                            <p class="p-2 text-sm font-medium text-center text-purple-700">Air yang Mensucikan</p>
                            <!-- Ikon Play -->
                            <svg class="play-icon w-12 h-12 text-white bg-black bg-opacity-60 rounded-full p-2" viewBox="0 0 24 24" fill="currentColor" onclick="event.stopPropagation(); toggleAudio('fiqh-6');">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                            <!-- Ikon Pause -->
                            <svg class="pause-icon w-12 h-12 text-white bg-black bg-opacity-60 rounded-full p-2" viewBox="0 0 24 24" fill="currentColor" onclick="event.stopPropagation(); toggleAudio('fiqh-6');">
                                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
                            </svg>
                            <!-- Audio element tersembunyi -->
                            <audio id="audio-fiqh-6" src="GAMBAR/FIQH/IMG f 6 vc.wav" preload="none"></audio>
                        </div>
                    </div>
                </article>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-12 py-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-sm">
            &copy; 2025 Portal Pembelajaran Interaktif. Hak Cipta Dilindungi.
        </div>
    </footer>

    <!-- JavaScript Interaktif -->
    <script>
        let currentAudio = null; // Melacak audio yang sedang diputar
        let currentCard = null;  // Melacak kartu yang sedang aktif

        // Fungsi untuk menghentikan semua audio kecuali yang ditentukan
        function stopAllAudio(exceptId) {
            document.querySelectorAll('audio').forEach(audio => {
                if (audio.id !== `audio-${exceptId}` && !audio.paused) {
                    audio.pause();
                    audio.currentTime = 0;
                }
            });
            // Hapus kelas 'playing' dari semua kartu kecuali yang ditentukan
            document.querySelectorAll('.image-card').forEach(card => {
                if (card.id !== exceptId) {
                    card.classList.remove('playing');
                }
            });
        }

        // Fungsi utama untuk memutar/menjeda audio
        function toggleAudio(cardId) {
            const card = document.getElementById(cardId);
            const audio = document.getElementById(`audio-${cardId}`);
            
            if (!audio) return; // Pastikan elemen audio ada

            // Jika audio saat ini adalah audio yang sama dan sedang diputar (Pause)
            if (audio === currentAudio && !audio.paused) {
                audio.pause();
                card.classList.remove('playing');
                currentAudio = null;
                currentCard = null;
            } 
            // Jika audio yang berbeda atau audio yang sama sedang dijeda (Play)
            else {
                // Hentikan semua audio yang sedang diputar lainnya
                stopAllAudio(cardId); 
                
                audio.play().catch(error => {
                    console.error("Gagal memutar audio:", error);
                    alert("Gagal memutar audio. Pastikan Anda telah menyematkan file audio yang valid.");
                });
                card.classList.add('playing');
                currentAudio = audio;
                currentCard = card;
            }
        }
        
        // Tambahkan event listener ke setiap kartu untuk memicu toggleAudio
        document.querySelectorAll('.image-card').forEach(card => {
            card.addEventListener('click', () => {
                // Memanggil toggleAudio menggunakan ID kartu saat kartu diklik
                toggleAudio(card.id); 
            });
        });
        
        // Event listener saat audio selesai diputar
        document.querySelectorAll('audio').forEach(audio => {
            audio.addEventListener('ended', () => {
                const cardId = audio.id.replace('audio-', '');
                const card = document.getElementById(cardId);
                card.classList.remove('playing');
                if (currentAudio === audio) {
                    currentAudio = null;
                    currentCard = null;
                }
            });
        });

        // --- Scroll Spy Navigasi ---
        const navLinks = document.querySelectorAll('.nav-link');

        const setActiveLink = () => {
            let currentHash = window.location.hash || '#sejarah-gambar'; // Default ke yang pertama
            
            navLinks.forEach(link => {
                link.classList.remove('active-nav', 'text-gray-700');
                if (link.getAttribute('href') === currentHash) {
                    link.classList.add('active-nav');
                } else {
                     link.classList.add('text-gray-700');
                }
            });
        };

        setActiveLink();
        window.addEventListener('hashchange', setActiveLink);

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    history.replaceState(null, null, '#' + entry.target.id);
                    setActiveLink();
                }
            });
        }, {
            rootMargin: "0px 0px -70% 0px", 
            threshold: 0 
        });

        document.querySelectorAll('section article').forEach(article => {
            observer.observe(article);
        });
    </script>
</body>
</html>